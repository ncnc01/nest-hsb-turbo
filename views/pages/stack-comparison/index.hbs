{{!-- ìŠ¤íƒ ë¹„êµ í˜ì´ì§€ --}}
<turbo-frame id="main-content">
  <div class="space-y-8" x-data="stackComparison()" x-cloak>
    
    {{!-- í—¤ë” ì„¹ì…˜ --}}
    <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-8 text-white">
      <h1 class="text-3xl font-bold mb-4">ì›¹ ê°œë°œ ìŠ¤íƒ ë¹„êµ</h1>
      <p class="text-blue-100 text-lg">
        ë‹¤ì–‘í•œ ì›¹ ê°œë°œ ê¸°ìˆ  ìŠ¤íƒì˜ íŠ¹ì§•ê³¼ ì¥ë‹¨ì ì„ ë¹„êµí•˜ì—¬ í”„ë¡œì íŠ¸ì— ë§ëŠ” ìµœì ì˜ ì„ íƒì„ ë„ì™€ë“œë¦½ë‹ˆë‹¤.
      </p>
    </div>

    {{!-- í˜„ì¬ í”„ë¡œì íŠ¸ í•˜ì´ë¼ì´íŠ¸ --}}
    <div class="bg-green-50 border border-green-200 rounded-lg p-6">
      <div class="flex items-center mb-4">
        <span class="text-3xl mr-3">ğŸŸ¢</span>
        <div>
          <h2 class="text-xl font-bold text-green-800">í˜„ì¬ í”„ë¡œì íŠ¸: NestJS + Handlebars</h2>
          <p class="text-green-600">TypeScript ê¸°ë°˜ ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§</p>
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
        <div class="bg-white p-4 rounded-lg">
          <div class="text-2xl font-bold text-green-600">ê°•ë ¥í•œ íƒ€ì… ì‹œìŠ¤í…œ</div>
          <p class="text-sm text-gray-600">TypeScriptë¡œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ ë°©ì§€</p>
        </div>
        <div class="bg-white p-4 rounded-lg">
          <div class="text-2xl font-bold text-green-600">SEO ìµœì í™”</div>
          <p class="text-sm text-gray-600">ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ìœ¼ë¡œ ê²€ìƒ‰ì—”ì§„ ì¹œí™”ì </p>
        </div>
        <div class="bg-white p-4 rounded-lg">
          <div class="text-2xl font-bold text-green-600">ì—”í„°í”„ë¼ì´ì¦ˆê¸‰</div>
          <p class="text-sm text-gray-600">í™•ì¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„± ì œê³µ</p>
        </div>
      </div>
    </div>

    {{!-- ìŠ¤íƒ ê°œìš” ì¹´ë“œë“¤ --}}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {{#each stacks}}
      <div class="bg-white rounded-xl shadow-lg border hover:shadow-xl transition-shadow duration-300 
                  {{#if currentProject}}ring-2 ring-green-500{{/if}}">
        <div class="p-6">
          <div class="flex items-center mb-4">
            <span class="text-3xl mr-3">{{logo}}</span>
            <div>
              <h3 class="text-lg font-bold">{{name}}</h3>
              <span class="inline-block px-2 py-1 text-xs rounded-full bg-{{color}}-100 text-{{color}}-800">
                {{type}}
              </span>
            </div>
          </div>
          <p class="text-gray-600 text-sm mb-4">{{description}}</p>
          {{#if currentProject}}
          <div class="bg-green-100 text-green-800 text-sm px-3 py-2 rounded-lg">
            âœ¨ í˜„ì¬ í”„ë¡œì íŠ¸
          </div>
          {{/if}}
        </div>
      </div>
      {{/each}}
    </div>

    {{!-- ë¹„êµ ë§¤íŠ¸ë¦­ìŠ¤ --}}
    <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold mb-6">ì¢…í•© ë¹„êµ ë§¤íŠ¸ë¦­ìŠ¤</h2>
      
      {{!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ --}}
      <div class="flex flex-wrap border-b mb-6">
        <button @click="setActiveTab('matrix')" 
                :class="activeTab === 'matrix' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500'"
                class="px-4 py-2 border-b-2 font-medium">
          ì¢…í•© ë§¤íŠ¸ë¦­ìŠ¤
        </button>
        <button @click="setActiveTab('performance')" 
                :class="activeTab === 'performance' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500'"
                class="px-4 py-2 border-b-2 font-medium">
          ì„±ëŠ¥ ì§€í‘œ
        </button>
        <button @click="setActiveTab('learning')" 
                :class="activeTab === 'learning' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500'"
                class="px-4 py-2 border-b-2 font-medium">
          í•™ìŠµ ê³¡ì„ 
        </button>
        <button @click="setActiveTab('ecosystem')" 
                :class="activeTab === 'ecosystem' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500'"
                class="px-4 py-2 border-b-2 font-medium">
          ìƒíƒœê³„
        </button>
      </div>

      {{!-- ì¢…í•© ë§¤íŠ¸ë¦­ìŠ¤ íƒ­ --}}
      <div :class="activeTab === 'matrix' ? 'block' : 'hidden'" class="overflow-x-auto">
        <table class="min-w-full">
          <thead>
            <tr class="bg-gray-50">
              <th class="px-4 py-3 text-left text-sm font-medium text-gray-900">ê¸°ìˆ  ìŠ¤íƒ</th>
              {{#each comparisonMatrix.categories}}
              <th class="px-4 py-3 text-center text-sm font-medium text-gray-900">{{this}}</th>
              {{/each}}
              <th class="px-4 py-3 text-center text-sm font-medium text-gray-900">ì´ì </th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200">
            {{#each stacks}}
            <tr class="hover:bg-gray-50 {{#if currentProject}}bg-green-50{{/if}}">
              <td class="px-4 py-3">
                <div class="flex items-center">
                  <span class="text-xl mr-2">{{logo}}</span>
                  <div>
                    <div class="font-medium">{{name}}</div>
                    <div class="text-sm text-gray-500">{{type}}</div>
                  </div>
                </div>
              </td>
              {{#each scores}}
              <td class="px-4 py-3 text-center">
                <div class="flex items-center justify-center">
                  <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold
                              {{#if (gte this 8)}}bg-green-100 text-green-800{{else}}
                              {{#if (gte this 6)}}bg-yellow-100 text-yellow-800{{else}}
                              bg-red-100 text-red-800{{/if}}{{/if}}">
                    {{this}}
                  </div>
                </div>
              </td>
              {{/each}}
              <td class="px-4 py-3 text-center">
                <div class="font-bold text-lg">{{totalScore}}</div>
              </td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>

      {{!-- ì„±ëŠ¥ ì§€í‘œ íƒ­ --}}
      <div :class="activeTab === 'performance' ? 'block' : 'hidden'" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="bg-blue-50 p-4 rounded-lg">
            <h4 class="font-bold text-blue-800 mb-3">ë¡œë”© ì‹œê°„ (ì´ˆ)</h4>
            {{#each stacks}}
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm">{{name}}</span>
              <span class="font-mono text-sm">{{lookup ../performanceMetrics.loadTime id}}s</span>
            </div>
            {{/each}}
          </div>
          <div class="bg-green-50 p-4 rounded-lg">
            <h4 class="font-bold text-green-800 mb-3">ì²˜ë¦¬ëŸ‰ (req/sec)</h4>
            {{#each stacks}}
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm">{{name}}</span>
              <span class="font-mono text-sm">{{numberFormat (lookup ../performanceMetrics.throughput id)}}</span>
            </div>
            {{/each}}
          </div>
          <div class="bg-purple-50 p-4 rounded-lg">
            <h4 class="font-bold text-purple-800 mb-3">ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ (MB)</h4>
            {{#each stacks}}
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm">{{name}}</span>
              <span class="font-mono text-sm">{{lookup ../performanceMetrics.memoryUsage id}}MB</span>
            </div>
            {{/each}}
          </div>
        </div>
      </div>

      {{!-- í•™ìŠµ ê³¡ì„  íƒ­ --}}
      <div :class="activeTab === 'learning' ? 'block' : 'hidden'" class="space-y-4">
        {{#each stacks}}
        <div class="border rounded-lg p-4">
          <div class="flex items-center justify-between mb-3">
            <div class="flex items-center">
              <span class="text-xl mr-2">{{logo}}</span>
              <h4 class="font-bold">{{name}}</h4>
            </div>
            <span class="px-3 py-1 text-sm rounded-full bg-gray-100">
              {{lookup ../learningCurve id 'difficulty'}}
            </span>
          </div>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
            <div>
              <span class="text-gray-600">ê¸°ì´ˆ í•™ìŠµ:</span>
              <span class="font-medium">{{lookup ../learningCurve id 'timeToBasic'}}ì¼</span>
            </div>
            <div>
              <span class="text-gray-600">ê³ ê¸‰ í•™ìŠµ:</span>
              <span class="font-medium">{{lookup ../learningCurve id 'timeToAdvanced'}}ì¼</span>
            </div>
            <div class="col-span-2">
              <span class="text-gray-600">ì„ í–‰ ì§€ì‹:</span>
              <span class="font-medium">{{lookup ../learningCurve id 'prerequisites'}}</span>
            </div>
          </div>
        </div>
        {{/each}}
      </div>

      {{!-- ìƒíƒœê³„ íƒ­ --}}
      <div :class="activeTab === 'ecosystem' ? 'block' : 'hidden'" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="bg-orange-50 p-4 rounded-lg">
            <h4 class="font-bold text-orange-800 mb-3">íŒ¨í‚¤ì§€ ìƒíƒœê³„</h4>
            {{#each stacks}}
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm">{{name}}</span>
              <span class="font-mono text-sm">{{numberFormat (lookup ../ecosystemComparison.packageCount id)}}</span>
            </div>
            {{/each}}
          </div>
          <div class="bg-indigo-50 p-4 rounded-lg">
            <h4 class="font-bold text-indigo-800 mb-3">ì»¤ë®¤ë‹ˆí‹° í™œì„±ë„</h4>
            {{#each stacks}}
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm">{{name}}</span>
              <div class="flex items-center">
                <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                  <div class="bg-indigo-600 h-2 rounded-full" 
                       style="width: {{lookup ../ecosystemComparison.communitySize id}}%"></div>
                </div>
                <span class="text-sm">{{lookup ../ecosystemComparison.communitySize id}}%</span>
              </div>
            </div>
            {{/each}}
          </div>
          <div class="bg-teal-50 p-4 rounded-lg">
            <h4 class="font-bold text-teal-800 mb-3">ì·¨ì—… ì‹œì¥</h4>
            {{#each stacks}}
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm">{{name}}</span>
              <div class="flex items-center">
                <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                  <div class="bg-teal-600 h-2 rounded-full" 
                       style="width: {{lookup ../ecosystemComparison.jobMarket id}}%"></div>
                </div>
                <span class="text-sm">{{lookup ../ecosystemComparison.jobMarket id}}%</span>
              </div>
            </div>
            {{/each}}
          </div>
        </div>
      </div>
    </div>

    {{!-- ìš©ë„ë³„ ì¶”ì²œ --}}
    <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold mb-6">í”„ë¡œì íŠ¸ ìœ í˜•ë³„ ì¶”ì²œ</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {{#each useCases}}
        <div class="border rounded-lg p-4 hover:shadow-md transition-shadow">
          <h3 class="font-bold text-lg mb-2">{{scenario}}</h3>
          <p class="text-gray-600 text-sm mb-3">{{reasons}}</p>
          <div class="flex flex-wrap gap-2">
            {{#each recommended}}
            <span class="px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800">
              {{#each ../../stacks}}
                {{#if (eq ../this id)}}{{name}}{{/if}}
              {{/each}}
            </span>
            {{/each}}
          </div>
        </div>
        {{/each}}
      </div>
    </div>

    {{!-- ê²°ë¡  ë° ì¶”ì²œì‚¬í•­ --}}
    <div class="bg-gradient-to-r from-green-600 to-blue-600 rounded-xl p-8 text-white">
      <h2 class="text-2xl font-bold mb-4">ê²°ë¡  ë° ì¶”ì²œì‚¬í•­</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-lg font-bold mb-3">NestJS + Handlebarsë¥¼ ì„ íƒí•´ì•¼ í•˜ëŠ” ê²½ìš°:</h3>
          <ul class="space-y-2 text-green-100">
            <li>â€¢ ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶•</li>
            <li>â€¢ TypeScriptì˜ ê°•ë ¥í•œ íƒ€ì… ì‹œìŠ¤í…œ í™œìš©</li>
            <li>â€¢ SEO ìµœì í™”ê°€ ì¤‘ìš”í•œ í”„ë¡œì íŠ¸</li>
            <li>â€¢ í™•ì¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ ì¤‘ìš”í•œ ì¥ê¸° í”„ë¡œì íŠ¸</li>
            <li>â€¢ íŒ€ í˜‘ì—…ê³¼ ì½”ë“œ í’ˆì§ˆì´ ì¤‘ìš”í•œ í™˜ê²½</li>
          </ul>
        </div>
        <div>
          <h3 class="text-lg font-bold mb-3">ë‹¤ë¥¸ ìŠ¤íƒì„ ê³ ë ¤í•´ì•¼ í•˜ëŠ” ê²½ìš°:</h3>
          <ul class="space-y-2 text-blue-100">
            <li>â€¢ <strong>WordPress:</strong> ë¹ ë¥¸ ì½˜í…ì¸  ì‚¬ì´íŠ¸ êµ¬ì¶•</li>
            <li>â€¢ <strong>React SPA:</strong> ê³ ë„ì˜ ì¸í„°ë™í‹°ë¸Œ ì•±</li>
            <li>â€¢ <strong>Rails:</strong> ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘</li>
            <li>â€¢ <strong>Spring:</strong> ëŒ€ê·œëª¨ Java ê¸°ë°˜ ì‹œìŠ¤í…œ</li>
            <li>â€¢ <strong>Next.js:</strong> í•˜ì´ë¸Œë¦¬ë“œ SSR/SPA</li>
          </ul>
        </div>
      </div>
    </div>

  </div>
</turbo-frame>

<script>
// ìŠ¤íƒ ë¹„êµ ë°ì´í„°
window.stackComparisonData = {
  stacks: {{{json stacks}}},
  comparisonMatrix: {{{json comparisonMatrix}}},
  useCases: {{{json useCases}}},
  performanceMetrics: {{{json performanceMetrics}}},
  learningCurve: {{{json learningCurve}}},
  ecosystemComparison: {{{json ecosystemComparison}}}
};
</script>

<script data-turbo-permanent>
function stackComparison() {
  return {
    activeTab: 'matrix',
    ...window.stackComparisonData,
    
    init() {
      console.log('Stack comparison page initialized');
      console.log('activeTab:', this.activeTab);
      console.log('stacks:', this.stacks);
      console.log('comparisonMatrix:', this.comparisonMatrix);
      
      // ì´ˆê¸° íƒ­ ìƒíƒœ ê°•ì œ ì„¤ì •
      this.activeTab = 'matrix';
      
      // DOM ì—…ë°ì´íŠ¸ ê°•ì œ
      this.$nextTick(() => {
        console.log('nextTick - activeTab:', this.activeTab);
      });
    },
    
    setActiveTab(tab) {
      console.log('Setting active tab to:', tab);
      this.activeTab = tab;
    }
  };
}
</script>